---
import Button from "./Button.astro";
---

<nav class="w-full bg-[#171717] h-[4rem]" x-data="{ isMobileMenuOpen: false }">
  <div class="w-[80%] mx-auto h-full flex flex-col md:flex-row space-x-1 text-white items-center justify-between">
    
    <!-- Botón menú móvil -->
    <div class="flex justify-between items-center w-full md:hidden py-2">
      <div>Logo</div> 
      <button 
        @click="isMobileMenuOpen = !isMobileMenuOpen" 
        class="text-white focus:outline-none"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
    
    <!-- Menú -->
    <ul 
      id="mobileMenu" 
      class="hidden md:flex flex-col md:flex-row w-full md:w-1/2 items-start md:items-center md:space-x-4 h-auto md:h-full justify-between"
      x-show="isMobileMenuOpen || window.innerWidth >= 768"
      @click.away="isMobileMenuOpen = false"
      :class="{ 'hidden': !isMobileMenuOpen && window.innerWidth < 768 }"
      x-cloak
    >
      <li class="h-full w-full md:w-auto flex items-center transition-all duration-300 ease-in-out hover:border-b-8 border-pink-500">
        <a href="#" class="h-full w-full py-2 md:py-0 flex items-center">Logo</a>
      </li>
      
      <!-- Primer menú desplegable -->
      <li 
        class="group h-full w-full md:w-auto flex items-center transition-all duration-300 ease-in-out hover:border-b-8 border-pink-500 relative" 
        x-data="{ open: false }" 
        @mouseenter="if (window.innerWidth >= 768) open = true" 
        @mouseleave="if (window.innerWidth >= 768) open = false"
      >
        <button 
          class="h-full w-full py-2 md:py-0 flex items-center justify-between md:justify-center gap-x-1"
          type="button"
          @click="if (window.innerWidth < 768) open = !open"
        >
          Servicios
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
          </svg>
        </button>
        
        <div
          x-cloak
          x-show="open"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 translate-y-1"
          x-transition:enter-end="opacity-100 translate-y-0"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 translate-y-0"
          x-transition:leave-end="opacity-0 translate-y-1"
          class="relative md:absolute left-0 md:left-1/2 z-10 mt-0 md:mt-3 w-full md:w-screen max-w-full md:max-w-md md:-translate-x-1/2 transform top-full bg-white md:bg-transparent"
        >
          <div class="overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5">
            <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
              <a href="#" class="flex items-start rounded-lg p-3 hover:bg-gray-50">
                <div class="ml-4">
                  <p class="text-base font-medium text-gray-900">Desarrollo Web</p>
                  <p class="mt-1 text-sm text-gray-500">Creamos sitios web a medida</p>
                </div>
              </a>
              <a href="#" class="flex items-start rounded-lg p-3 hover:bg-gray-50">
                <div class="ml-4">
                  <p class="text-base font-medium text-gray-900">Marketing Digital</p>
                  <p class="mt-1 text-sm text-gray-500">Mejoramos la presencia de tu marca</p>
                </div>
              </a>
            </div>
          </div>
        </div>
      </li>
      
      <!-- Segundo menú desplegable -->
      <li 
        class="group h-full w-full md:w-auto flex items-center transition-all duration-300 ease-in-out hover:border-b-8 border-pink-500 relative" 
        x-data="{ open: false }" 
        @mouseenter="if (window.innerWidth >= 768) open = true" 
        @mouseleave="if (window.innerWidth >= 768) open = false"
      >
        <button 
          class="h-full w-full py-2 md:py-0 flex items-center justify-between md:justify-center gap-x-1"
          type="button"
          @click="if (window.innerWidth < 768) open = !open"
        >
          Sobre nosotros
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
          </svg>
        </button>
        
        <div
          x-cloak
          x-show="open"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 translate-y-1"
          x-transition:enter-end="opacity-100 translate-y-0"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 translate-y-0"
          x-transition:leave-end="opacity-0 translate-y-1"
          class="relative md:absolute left-0 md:left-1/2 z-10 mt-0 md:mt-3 w-full md:w-screen max-w-full md:max-w-md md:-translate-x-1/2 transform top-full bg-white md:bg-transparent"
        >
          <div class="overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5">
            <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
              <a href="#" class="flex items-start rounded-lg p-3 hover:bg-gray-50">
                <div class="ml-4">
                  <p class="text-base font-medium text-gray-900">Nuestra historia</p>
                  <p class="mt-1 text-sm text-gray-500">Conoce cómo empezamos</p>
                </div>
              </a>
              <a href="#" class="flex items-start rounded-lg p-3 hover:bg-gray-50">
                <div class="ml-4">
                  <p class="text-base font-medium text-gray-900">Equipo</p>
                  <p class="mt-1 text-sm text-gray-500">Conoce a nuestros expertos</p>
                </div>
              </a>
            </div>
          </div>
        </div>
      </li>
      
      <!-- Último elemento sin menú desplegable -->
      <li class="h-full w-full md:w-auto flex items-center transition-all duration-300 ease-in-out hover:border-b-8 border-pink-500">
        <a href="#" class="h-full w-full py-2 md:py-0 flex items-center">Clientes</a>
      </li>
    </ul>
    
    <div class="hidden md:flex w-full md:w-1/2 justify-center gap-2">
      <button class="bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded transition-all duration-300">Agenda una llamada con nosotros!</button>
      <button><Button /></button>
    </div>
  </div>
</nav>

<style>
  [x-cloak] {
    display: none !important;
  }
  
  @media (max-width: 767px) {
    #mobileMenu {
      position: absolute;
      top: 4rem;
      left: 0;
      right: 0;
      background: #171717;
      z-index: 50;
      padding: 1rem;
    }
    
    .group .relative {
      position: static !important;
    }
    
    .group .transform {
      width: 100% !important;
      max-width: 100% !important;
      left: 0 !important;
    }
  }
</style>

<script src="//unpkg.com/alpinejs" defer></script>